Testing tools and tips&tricks

* performance

** callgring + kcachegrind

export LD_LIBRARY_PATH="/home/acerion/tmp/unixcw/unixcw/src/libcw/.libs"
valgrind --tool=callgrind   ./src/libcw/tests/.libs/libcw_test_all -A k -S a -N test_straight_key
callgrind_annotate --auto=yes callgrind.out.<PID>
kcachegrind


** perf

http://www.brendangregg.com/perf.html

export LD_LIBRARY_PATH="/home/acerion/tmp/unixcw/unixcw/src/libcw/.libs"
perf record --call-graph dwarf -F 200  -g  ./src/libcw/tests/.libs/libcw_test_all -A k -S a -N test_straight_key
# Show data stored in ./perf.data
perf report --stdio
perf report



* gdb

export LD_LIBRARY_PATH=`pwd`/src/libcw/.libs  && gdb --args ./.libs/libcw_test_legacy_api -n legacy_api_test_low_level_gen_parameters

* PulseAudio

To kill pulseaudio server and prevent it from re-starting:
emacs ~/.config/pulse/client.conf
autospawn = no
killall -9 pulseaudio


* ALSA
"plughw" device


https://alsa.opensrc.org/Proc_asound_documentation
echo 32 > /proc/asound/card0/pcm0p/sub0/prealloc
